!function(){"use strict";var e=angular.module("loopify.ui.numberPicker",["loopify.ui.numberPicker.templates"]);e.directive("numberPicker",["numberPickerService",function(e){return{restrict:"E",scope:{value:"=",min:"@",max:"@",step:"@",enter:"@",percent:"@",label:"@",methodRound:"@"},templateUrl:"templates/numberPicker/numberPicker.html",link:function(r,n,t){if(!e.checkNumber([r.min,r.max,r.step]))throw new Error("some value: (min, max or step) is not a valid number");r.percent&&(r.percentLabel="%",r.isPercent=!0),r.id=e.getId(),r.incrementValue=function(){r.value>=(r.isPercent?100:Number(r.max))||(r.value+=Number(r.step))},r.decrementValue=function(){r.value<=(r.isPercent?0:Number(r.min))||(r.value-=Number(r.step))},r.togglePercentageValue=function(){r.isPercent=!r.isPercent,r.isPercent?r.percentLabel="%":r.percentLabel=r.label},r.$watch("value",function(n,t){n=Number(n);var u=r.isPercent?0:Number(r.min),i=r.isPercent?100:Number(r.max);r.canDown=n>u,r.canUp=i>n,r.isMaxValue=!r.canUp,r.isMinValue=!r.canDown,(!e.checkNumber(n)||n>i||u>n)&&(r.value=e.checkNumber(t)?t:r.min)}),r.$watch("percentLabel",function(e,n){if(!e&&!n)return!1;var t=Number(r.value),u=(Number(r.min),Number(r.max));r.isPercent?r.value=r.methodRound?Math[r.methodRound](t/u*100):t/u*100:r.value=r.methodRound?Math[r.methodRound](u*t/100):u*t/100})}}}]),e.factory("numberPickerService",[function(){return{index:0,isNumber:function(e){var r=Number(e);return!isNaN(r)&&r===+e},checkNumber:function(e){var r=this,n=0;return angular.isArray(e)?(angular.forEach(e,function(e){r.isNumber(e)||(n+=1)}),n>0?!1:!0):this.isNumber(e)?!0:!1},getId:function(){return this.index+=1,"number-picker-"+this.index}}}])}();